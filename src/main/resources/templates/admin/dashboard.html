<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Admin - Dashboard</title>
    <link href="/css/dashboardadmin.css" rel="stylesheet">
</head>
<body>
<!-- NAVBAR -->
<nav class="navbar">
    <div class="navbar-container">
        <a class="navbar-brand" href="#">SunObra - Admin</a>
        <ul class="navbar-links">
            <li><a href="/">Inicio</a></li>
            <li><a href="/admin/users">Usuarios</a></li>
            <li><a href="/admin/reports">Reportes</a></li>
            <li><a href="/admin/email/form">Enviar mensaje</a></li>

            <!-- üîµ Acceso al m√≥dulo de gr√°ficos -->
            <li><a href="/admin/charts">Gr√°ficos</a></li>

            <!-- ‚úÖ NUEVO: Health (Actuator) -->
            <li><a href="/admin/health">Health</a></li>
        </ul>
        <a class="btn-logout" href="/logout">Cerrar sesi√≥n</a>
    </div>
</nav>

<!-- CONTENIDO -->
<div class="container">
    <h1 class="title">Panel de Administraci√≥n</h1>

    <!-- Mensajes flash -->
    <div th:if="${success}" class="alert alert-success" th:text="${success}"></div>
    <div th:if="${error}" class="alert alert-danger" th:text="${error}"></div>

    <div class="cards">

        <!-- Card Usuarios -->
        <div class="card card-blue">
            <h5>Total Usuarios</h5>
            <div class="card-value" th:text="${totalUsuarios}">0</div>
            <a href="/admin/users" class="btn-card">Gestionar</a>
        </div>

        <!-- ‚úÖ NUEVO: Solicitudes Abiertas -->
        <div class="card card-yellow">
            <h5>Solicitudes Abiertas</h5>
            <div class="card-value" th:text="${solicitudesAbiertas}">0</div>
            <p class="card-subtitle">Solicitudes pendientes/disponibles</p>
            <a href="/admin/charts" class="btn-card dark">Ver gr√°fico</a>
        </div>

        <!-- ‚úÖ NUEVO: Servicios en Proceso -->
        <div class="card card-green">
            <h5>Servicios en Proceso</h5>
            <div class="card-value" th:text="${serviciosEnProceso}">0</div>
            <p class="card-subtitle">Servicios activos actualmente</p>
            <a href="/admin/charts" class="btn-card">Ver gr√°fico</a>
        </div>

        <!-- ‚úÖ NUEVO: Total Reviews -->
        <div class="card card-purple">
            <h5>Total Reviews</h5>
            <div class="card-value" th:text="${totalReviews}">0</div>
            <p class="card-subtitle">Calificaciones registradas</p>
            <a href="/admin/charts" class="btn-card">Ver gr√°ficos</a>
        </div>

        <!-- Card Reportes -->
        <div class="card card-blue">
            <h5>Reportes Avanzados</h5>
            <!-- Tu variable original se deja para no romper nada -->
            <div class="card-value" th:text="${contratosActivos}">0</div>
            <a href="/admin/reports" class="btn-card">Ver</a>
        </div>

        <!-- Card Env√≠o de Correos -->
        <div class="card card-green">
            <h5>Env√≠o de Correos</h5>
            <p class="card-subtitle">Mensajes masivos a usuarios</p>
            <a href="/admin/email/form" class="btn-card">Enviar mensaje</a>
        </div>

        <!-- üü£ Gr√°ficos -->
        <div class="card card-purple">
            <h5>Gr√°ficos / Estad√≠sticas</h5>
            <p class="card-subtitle">Ver datos visuales</p>
            <a href="/admin/charts" class="btn-card">Ver gr√°ficos</a>
        </div>

        <!-- ‚úÖ NUEVO: ALERTAS -->
        <div class="card card-yellow">
            <h5>Alertas del Sistema</h5>

            <p class="card-subtitle">
                Solicitudes pendientes (+30 d√≠as):
                <strong th:text="${alertSolicitudes}">0</strong>
            </p>

            <p class="card-subtitle">
                Servicios demorados (+60 d√≠as):
                <strong th:text="${alertServicios}">0</strong>
            </p>

            <a href="/admin/charts" class="btn-card dark">Revisar</a>
        </div>

    </div>
</div>

<!-- FOOTER -->
<footer class="footer">
    ¬© 2025 SunObra - Plataforma de Servicios de Construcci√≥n
</footer>
</body>
</html>