<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Solicitudes disponibles</title>

    <link rel="stylesheet" th:href="@{/css/solicitudes_list.css}" />
</head>
<body>

<!-- Topbar (patrÃ³n como tu imagen) -->
<header class="topbar">
    <div class="topbar__left">
        <a class="brand" href="/obrero/dashboard">
            <span class="brand__name">SunObra</span><span class="brand__role">-Obreo</span>
        </a>
    </div>

    <nav class="topbar__nav">
        <a class="topbar__link" href="/obrero/dashboard">Inicio</a>
        <a class="topbar__link" href="/obrero/perfil">Perfil</a>
        <a class="topbar__link" href="/obrero/reportes">Reportes</a>
    </nav>

    <div class="topbar__right">
        <a class="btn btn--yellow" href="/logout">Cerrar SesiÃ³n</a>
    </div>
</header>

<main class="page">
    <section class="container">

        <div class="page-header">
            <h1 class="page-title">Solicitudes disponibles</h1>
            <p class="page-subtitle">Estado: <span class="badge badge--open">ABIERTAS</span></p>
        </div>

        <!-- Acciones tipo botones (como en tu dashboard) -->
        <div class="actions">
            <a class="btn btn--ghost" href="/obrero/dashboard">â¬… Volver</a>
            <a class="btn btn--dark" href="/obrero/marketplace/cotizaciones">ðŸ“„ Mis cotizaciones</a>
            <a class="btn btn--orange" href="/obrero/marketplace/servicios">ðŸ›  Mis servicios</a>
        </div>

        <!-- Card contenedor (tabla con estilo) -->
        <div class="card">
            <div class="card__header">
                <h2 class="card__title">Listado</h2>
                <p class="card__hint">Selecciona una solicitud para ver detalles y cotizar.</p>
            </div>

            <div class="table-wrap">
                <table class="table">
                    <thead>
                    <tr>
                        <th>ID</th>
                        <th>Especialidad</th>
                        <th>Urgencia</th>
                        <th>UbicaciÃ³n</th>
                        <th>Creada</th>
                        <th>AcciÃ³n</th>
                    </tr>
                    </thead>

                    <tbody>
                    <tr th:if="${#lists.isEmpty(solicitudes)}">
                        <td colspan="6" class="empty">
                            No hay solicitudes abiertas en este momento.
                        </td>
                    </tr>

                    <tr th:each="s : ${solicitudes}">
                        <td data-label="ID" th:text="${s.id}">1</td>

                        <td data-label="Especialidad" th:text="${s.especialidad}">
                            Electricidad
                        </td>

                        <td data-label="Urgencia">
                            <span class="urgency"
                                  th:text="${s.urgencia}"
                                  th:classappend="
                                    ${s.urgencia} == 'ALTA' ? ' urgency--high' :
                                    (${s.urgencia} == 'MEDIA' ? ' urgency--mid' : ' urgency--low')
                                  ">
                                MEDIA
                            </span>
                        </td>

                        <td data-label="UbicaciÃ³n" th:text="${s.ubicacion}">BogotÃ¡</td>

                        <td data-label="Creada" th:text="${s.createdAt}">2026-02-08</td>

                        <td data-label="AcciÃ³n">
                            <a class="btn btn--sm btn--orange"
                               th:href="@{'/obrero/marketplace/solicitudes/' + ${s.id}}">
                                Ver / Cotizar
                            </a>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>

    </section>
</main>

<footer class="footer">
    <div class="footer__inner">Â© 2025 SunObra - Plataforma de Servicios de ConstrucciÃ³n</div>
</footer>

</body>
</html>
